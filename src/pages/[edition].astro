---
import { getCollection } from "astro:content";
import Layout from "../layouts/layout.astro";
import Edition from "../components/edition.astro";

const editions = await getCollection("editions");

export async function getStaticPaths() {
  const editions = await getCollection("editions");

  return editions.map((e) => ({
    params: { edition: `edition${e.id}` },
  }));
}

const edition = editions.find(
  (e) => e.data.id === Astro.params.edition.replace("edition", ""),
)!;
---

<Layout title={`${edition.data.title} (${edition.data.year})`}>
  <Edition edition={edition.data} />
</Layout>
